CREATE DATABASE fiditi;

USE fiditi;

-- 3NF
CREATE TABLE admin(
	admin_id INT(3) PRIMARY KEY AUTO_INCREMENT,
    admin_name VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL
);

CREATE TABLE customer(
	customer_id INT(3) PRIMARY KEY AUTO_INCREMENT,
    customer_name VARCHAR(255) NOT NULL,
    address VARCHAR(255) NOT NULL,
    email VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL	
);

-- 3NF
CREATE TABLE food_item(
    item_id INT(3) PRIMARY KEY AUTO_INCREMENT,
    item_name VARCHAR(255) NOT NULL,
    category VARCHAR(255) NOT NULL,
    description VARCHAR(255) NOT NULL,
    price INT(4) NOT NULL
);

-- 3NF
CREATE TABLE restaurant_table(
    table_id INT(3) PRIMARY KEY AUTO_INCREMENT,
    capacity VARCHAR(50) NOT NULL
);

-- 3NF
CREATE TABLE customer_order (
    order_id INT(3) PRIMARY KEY AUTO_INCREMENT,
    customer_id INT(3) NOT NULL,
    price INT(4) NOT NULL,
    status ENUM('Pending', 'Completed') NOT NULL,
    FOREIGN KEY (customer_id) REFERENCES customer(customer_id)
);

-- 3NF
CREATE TABLE order_item (
    order_id INT(3),
    item_id INT(3),
    quantity INT(3) NOT NULL,
    PRIMARY KEY (order_id, item_id),
    FOREIGN KEY (order_id) REFERENCES customer_order(order_id),
    FOREIGN KEY (item_id) REFERENCES food_item(item_id)
);

-- 3NF
CREATE TABLE reservation(
	reservation_id INT(3) PRIMARY KEY AUTO_INCREMENT,
    customer_id INT(3) NOT NULL,
    table_id INT(3) NOT NULL,
    reservation_date DATE,
    time  VARCHAR(255) NOT NULL,
    status ENUM('Active', 'Closed') NOT NULL,
    FOREIGN KEY(customer_id) REFERENCES customer(customer_id),
    FOREIGN KEY(table_id) REFERENCES restaurant_table(table_id)
);




-- Insert sample data
INSERT INTO admin(admin_id, admin_name, email, password)
VALUES (1, 'Heshan Hansana', 'heshan@gmail.com', '$2y$10$KU1eiSMhXG8DXW7ThAWZrOG9JllzXTN5G6FDaaEWe54WaMjOCkak.');

INSERT INTO restaurant_table(table_id, capacity) VALUES 
(20, 'Family'), (21, 'Family'), (22, 'Couple');